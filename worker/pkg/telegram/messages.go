package telegram

import (
	"fmt"
	"gopadel/scheduler/cmd/config"
	"gopadel/scheduler/pkg/domain"
)

func GenerateTournamentURL(config *config.Config, tournamentID string) string {
	return fmt.Sprintf("%s?startapp=t-%s", config.TelegramWebAppURL(), tournamentID)
}

func GetMessageForTaskType(taskType domain.TaskType, data map[string]interface{}, config *config.Config) *domain.MessageText {
	tournamentID := ""
	if id, ok := data["tournament_id"].(string); ok {
		tournamentID = id
	}
	tournamentURL := GenerateTournamentURL(config, tournamentID)

	switch taskType {
	case domain.TaskTypeTournamentRegistrationSuccess:
		isFree, _ := data["is_free"].(bool)
		if isFree {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä '%s'!\n\n‚úÖ –í–∞—à–µ –º–µ—Å—Ç–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ\nüÜì –£—á–∞—Å—Ç–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ\nüìÖ –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–∏–π—Ç–∏ –≤–æ–≤—Ä–µ–º—è\n\n–î–æ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ –∫–æ—Ä—Ç–µ! üèì\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		} else {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ç—É—Ä–Ω–∏—Ä '%s'!\n\n‚úÖ –í–∞—à–µ –º–µ—Å—Ç–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ\nüí° –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ–ø–ª–∞—Ç–∏—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤\n\n–î–æ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ –∫–æ—Ä—Ç–µ! üèì\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		}
	
	case domain.TaskTypeTournamentReminder48Hours:
		isPaid, _ := data["is_paid"].(bool)
		if isPaid {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"üéæ –°–∫–æ—Ä–æ –±–æ–ª—å—à–∞—è –∏–≥—Ä–∞!\n\n–ß–µ—Ä–µ–∑ 2 –¥–Ω—è —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ç—É—Ä–Ω–∏—Ä '%s'!\n\n‚úÖ –í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –≤–∞—à–µ–º—É —É—á–∞—Å—Ç–∏—é\nüèì –ì–æ—Ç–æ–≤—å—Ç–µ —Ä–∞–∫–µ—Ç–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ –ø–æ–±–µ–¥—É!\n\n–£–≤–∏–¥–∏–º—Å—è –Ω–∞ –∫–æ—Ä—Ç–µ! üí™\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		} else {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"‚ö°Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –û—Å—Ç–∞–ª–æ—Å—å 2 –¥–Ω—è –¥–æ —Ç—É—Ä–Ω–∏—Ä–∞ '%s'\n\n‚è∞ –í–∞—à–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∫–∞ –Ω–µ –æ–ø–ª–∞—á–µ–Ω–∞\nüí≥ –ó–∞–≤–µ—Ä—à–∏—Ç–µ –æ–ø–ª–∞—Ç—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ç—É—Ä–Ω–∏—Ä–µ\n\nüëÜ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É –Ω–∏–∂–µ:\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		}
	
	case domain.TaskTypeTournamentReminder24Hours:
		isPaid, _ := data["is_paid"].(bool)
		if isPaid {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"üî• –ó–∞–≤—Ç—Ä–∞ –≤–∞—à —Ç—É—Ä–Ω–∏—Ä!\n\n–¢—É—Ä–Ω–∏—Ä '%s' —Å—Ç–∞—Ä—Ç—É–µ—Ç —É–∂–µ –∑–∞–≤—Ç—Ä–∞!\n\nüéØ –í—ã –≥–æ—Ç–æ–≤—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –ª—É—á—à—É—é –∏–≥—Ä—É\n‚è∞ –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–∏–π—Ç–∏ –≤–æ–≤—Ä–µ–º—è\nüèì –í–æ–∑—å–º–∏—Ç–µ —Ä–∞–∫–µ—Ç–∫—É –∏ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!\n\n–£–¥–∞—á–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä–µ! üèÜ\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		} else {
			return &domain.MessageText{
				Text: fmt.Sprintf(
					"üö® –ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å!\n\n–î–æ —Ç—É—Ä–Ω–∏—Ä–∞ '%s' –æ—Å—Ç–∞–ª—Å—è –≤—Å–µ–≥–æ 1 –¥–µ–Ω—å!\n\nüí≥ –°—Ä–æ—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –æ–ø–ª–∞—Ç—É, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —Å–≤–æ–µ –º–µ—Å—Ç–æ\n‚ö†Ô∏è –ë–µ–∑ –æ–ø–ª–∞—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞\n\nüëá –û–ø–ª–∞—Ç–∏—Ç—å –º–æ–∂–Ω–æ –∑–¥–µ—Å—å:\n\n%s",
					data["tournament_name"],
					tournamentURL,
				),
			}
		}
	
	case domain.TaskTypeTournamentFreeReminder48Hours:
		return &domain.MessageText{
			Text: fmt.Sprintf(
				"üéâ –û—Ç–ª–∏—á–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å!\n\n–ß–µ—Ä–µ–∑ 2 –¥–Ω—è —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä '%s'!\n\nüÜì –£—á–∞—Å—Ç–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ\n‚úÖ –í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã\nüèì –ü—Ä–æ—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∏ –∏–≥—Ä–∞–π—Ç–µ!\n\nüìÖ –î–æ–±–∞–≤—å—Ç–µ —Ç—É—Ä–Ω–∏—Ä –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã—Ç—å\n\n–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –Ω–∞ –∫–æ—Ä—Ç–µ! ü§ù\n\n%s",
				data["tournament_name"],
				tournamentURL,
			),
		}
	
	case domain.TaskTypeTournamentPaymentSuccess:
		return &domain.MessageText{
			Text: fmt.Sprintf(
				"üéâ –û—Ç–ª–∏—á–Ω–æ! –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!\n\n–í—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –≤ —Ç—É—Ä–Ω–∏—Ä–µ '%s'!\n\n‚úÖ –ú–µ—Å—Ç–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ\nüèÜ –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –ø–æ–±–µ–¥–µ\nüì± –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n\n–£–¥–∞—á–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä–µ! üí™\n\n%s",
				data["tournament_name"],
				tournamentURL,
			),
		}
	
	case domain.TaskTypeTournamentRegistrationCanceled:
		return &domain.MessageText{
			Text: fmt.Sprintf(
				"üòî –í–∞—à–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞\n\n–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä '%s' –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞.\n\nüîÑ –í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞\nüì± –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n\n–ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ—Å—å - –≤–ø–µ—Ä–µ–¥–∏ –µ—â–µ –º–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–æ–≤! üí™\n\n%s",
				data["tournament_name"],
				tournamentURL,
			),
		}
	
	case domain.TaskTypeTournamentLoyaltyChanged:
		return &domain.MessageText{
			Text: fmt.Sprintf(
				"üéâ –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏!\n\n–í–∞—à —É—Ä–æ–≤–µ–Ω—å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–≤—ã—à–µ–Ω!\n\nüìà –ë—ã–ª–æ: %s\n‚≠êÔ∏è –°—Ç–∞–ª–æ: %s\n\nüéÅ –¢–µ–ø–µ—Ä—å –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ —Å–∫–∏–¥–∫–∏!\nüì± –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ \"–õ–æ—è–ª—å–Ω–æ—Å—Ç—å\"\n\n–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏–≥—Ä–∞—Ç—å –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ –Ω–æ–≤—ã—Ö –≤—ã—Å–æ—Ç! üöÄ",
				data["old_level"],
				data["new_level"],
			),
		}
	
	case domain.TaskTypeTournamentRegistrationAutoDeleteUnpaid:
		return &domain.MessageText{
			Text: fmt.Sprintf(
				"‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ...\n\n–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä '%s' –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –∏–∑-–∑–∞ –Ω–µ–æ–ø–ª–∞—Ç—ã.\n\nüí° –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ–ø–ª–∞—Ç–∏—Ç—å —É—á–∞—Å—Ç–∏–µ –≤–æ–≤—Ä–µ–º—è\nüîÑ –ï—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ\n\n–î–æ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç—É—Ä–Ω–∏—Ä–∞—Ö! üèì\n\n%s",
				data["tournament_name"],
				tournamentURL,
			),
		}
	
	default:
		return &domain.MessageText{
			Text: "üèì –£ –Ω–∞—Å –µ—Å—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è –≤–∞—Å!\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ GoPadel –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
		}
	}
}